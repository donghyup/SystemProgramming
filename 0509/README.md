# 10주차 시스템프로그래밍

## 파일 시스템 구조
- 부트 블록
  - 파일 시스템 시작부에 위치하고 보통 첫 번째 섹터를 차지
  - 부트스트랩 코드가 저장되는 블록
- 슈퍼블록
  - 전체 파일 시스템에 대한 정보를 저장
      - 총 블록 수, 사용가능한 i-노드 개수, 사용 가능한 블록 비트 맵, 블록의 크기, 사용 중인 블록 수, 사용 가능한 블록 수등
- 데이터 블록(Data block)
  - 파일의 내용을 저장하기 위한 블록들

### i-노드(i-Node)
- 한 파일을 하나의 i-노드(i-Node)를 갖는다.
  - 파일 타입: 일반 파일, 디렉토리, 블록 장치, 문자 장치 등
  - 파일 크기
  - 사용권한
  - 파일 소유자 및 그룹
  - 접근 및 갱신 시간
  - 데이터 블록에 대한 포인터(주소) 등

### 블록 포인터
- 데이터 블록에 대한 포인터
    - 파일의 내용을 저장하기 위해 할당된 데이터 블록의 주소

- 하나의 i-노드 내의 블록 포인터
  - 직접 블록 포인터 10개
  - 간접 블록 포인터 1개
  - 이중 간접 블록 포인터 1개

 ---

 ### 파일 디스크립터 배열(FD Array)
- 프로세스 당 하나씩 갖는다.
- 파일 디스크립터 배열
  - 열린 파일 테이블의 엔트리를 가리킨다.
- 파일 디스크립터
  - 파일 디스크립터 배열의 인덱스
  - 열린 파일을 나타내는 번호

## 파일 상태
![image](https://github.com/user-attachments/assets/89768c7e-3e3d-44f4-a6b0-cc40929927fe)
## 파일 사용 권한
![image](https://github.com/user-attachments/assets/500a82cc-104c-4403-a625-5c6056b5fc22)

---

- 하드 링크
  - 지금까지 살펴본 링크
  - 파일 시스템 내의 i-노드를 가리키므로
  - 같은 파일 시스템 내에서만 사용될 수 있다.
- 심볼릭 링크
  - 소프트 링크
  - 실제 파일의 경로명 저장하고 있는 링크
  - 파일에 대한 간접적인 포인터 역할을 한다.
  - 다른 파일 시스템에 있는 파일도 링크할 수 있다.


---

## 핵심 개념

» 표준 유닉스 파일 시스템은 부트 블록, 슈퍼 블록, i-리스트, 데이터 블록 부분으로 구성된다

» 파일 입출력 구현을 위해서 커널 내에 파일 디스크립터 배열, 파일 테이블, 동적 i-노드 테이블
등의 자료구조를 사용한다.

» 파일 하나당 하나의 i-노드가 있으며 i-노드 내에 파일에 대한 모든 상태 정보가 저장되어 있다.

» 디렉터리는 일련의 디렉터리 엔트리들을 포함하고 각 디렉터리 엔트리는 파일 이름과 그 파일
의 i-노드 번호로 구성된다.

» 링크는 기존 파일에 대한 또 다른 이름으로 하드 링크와 심볼릭(소프트) 링크가 있다


